# Индивидуальное домашнее задание №1
#### Студент: Нечесов Андрей Львович
#### Группа: БПИ217
#### Вариант: 15
## Содержание
- [Структура решения](#Запуск-программы-и-первое-тестирование)


## Структура решения
#### Данный пункт содержит описание файлов решения
`/src/program.c` -- решение на C в виде одного файла.  
`/src/program.s` -- ассемблерная программа, откомпилированная без оптимизирующих и отладочных опций.
`/src/simplified.s` -- полностью ассемблерная программа, из которой убраны лишние макросы.  
`/test.py` -- скрипт на языке Python, предназначенный для тестирования программы

## Критерии на 4 балла
### Написано решение на C
  Исходный монолитный код
### Комментарии к программе на ассемблере и компиляция программы

Трансформируем код написанный на языке C в язык ассемблера:
```console
gcc -masm=intel -fno-asynchronous-unwind-tables -fno-jump-tables -fno-stack-protector -fno-exceptions program.c -S -o program.s
```

Код на языке ассемблера прокомментирован: program.s

Откомпилируем полученную программу без использования отладочных и оптимизируюзих опций:
```console
gcc program.s -o program
```

### Из ассемблерной программы убраны лишние макросы
Часть работы уже была проделана опциями при трансформации. Теперь руками уберем из ассемблерной программы метаинформацию:
```assembly
	.ident	"GCC: (Ubuntu 9.4.0-1ubuntu1~20.04.1) 9.4.0"
	.section	.note.GNU-stack,"",@progbits
	.section	.note.gnu.property,"a"
	.align 8
	.long	 1f - 0f
	.long	 4f - 1f
	.long	 5
0:
	.string	 "GNU"
1:
	.align 8
	.long	 0xc0000002
	.long	 3f - 2f
2:
	.long	 0x3
3:
	.align 8
4:

```
И следующие команды:  
`endbr64` обеспечивает дополнительную безопасность, но в нашем идеально мире ИДЗ нет злых хакеров, поэтому удаляем команду.
`nop` используется для выравнивания, так как подчистили всю метаинформацию, можно тоже удалить.

Итоговая модифицированная программа: reduced.s
### Модифицированная ассемблерная программа отдельно откомпилирована
```console
gcc reduced.s -o reduced
```
### Тесты
Был составлен небольшой набор тестов для проверки граничных случаев:
0. Весь входной массив состоит из нулей
1. Во входном массиве нет нулей
2. Во входном массиве есть числа как меньше нуля, так и больше
3. Входной массив размера 1, причем элемент массива не равен 0
4. Входной массив размера 1, причем этот единственный элемент является нулем
5. Случайный массив

Все они находятся в папке tests и расположены в следующем порядке:
<Номер теста из списка выше> -- сам тест
<Номер теста из списка выше>.a -- ответ на тест

Теперь воспользуемся скриптом и запустим тесты для двух программ:
```console
./test.py -t tests/ src/program
./test.py -t tests/ src/reduced
```

Получаем одинаковые результаты:



